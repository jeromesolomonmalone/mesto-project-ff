{"version":3,"file":"main.js","mappings":"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","sources":["webpack://package.json/./src/scripts/card.js","webpack://package.json/./src/scripts/modal.js","webpack://package.json/./src/scripts/validation.js","webpack://package.json/./src/scripts/api.js","webpack://package.json/./src/scripts/index.js"],"sourcesContent":["const cardTemplate = document.querySelector(\"#card-template\").content;\n\n// @todo: Функция создания карточки\nexport function addCard(item, myID, addLikeApi, removeLikeApi, addLike, removeLike, showPopup, deleteCardApi) {\n  const cardElement = cardTemplate\n    .querySelector(\".places__item\")\n    .cloneNode(true);\n  cardElement.querySelector(\".card__image\").src = item.link;\n  cardElement.querySelector(\".card__image\").alt = item.name;\n  cardElement.querySelector(\".card__title\").textContent = item.name;\n  const numberOfLikes = cardElement.querySelector(\".number__likes\");\n  numberOfLikes.textContent = item.likes.length;\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\n  if (myID !== item.owner._id) {\n    deleteButton.remove();\n  }\n  deleteButton.addEventListener(\"click\", () => {\n    deleteCard(item._id, cardElement, deleteCardApi);\n  });\n\n  const cardLikeButton = cardElement.querySelector(\".card__like-button\");\n  \n\n  if (item.likes.some((like) => like._id === myID)) {\n    cardLikeButton.classList.add(\"card__like-button_is-active\");\n  }\n\n  cardLikeButton.addEventListener(\"click\", () => {\n    if (cardLikeButton.classList.contains(\"card__like-button_is-active\")) {\n      removeLikeApi(item._id, cardLikeButton, numberOfLikes, removeLike);\n    } else {\n      addLikeApi(item._id, cardLikeButton, numberOfLikes, addLike);\n    }\n  });\n\n  const cardImage = cardElement.querySelector(\".card__image\");\n  cardImage.addEventListener(\"click\", function () {\n    showPopup(item);\n  });\n\n  return cardElement;\n}\n\n//Функция-константа с изменением ID карты и самой КАРТОЧКИ, а также активации функции удаления карточки и с сервера и с вёрстки\nexport function deleteCard(id, card, deleteCardApi) {\n  deleteCardApi(id)\n    .then(() => {\n      card.remove();\n    })\n    .catch((err) => console.log(`Ошибка.....: ${err}`));\n}\n\nexport function addLikeApi(id, button, likes, addLike) {\n  addLike(id)\n    .then((res) => {\n      button.classList.add(\"card__like-button_is-active\");\n      likes.textContent = res.likes.length;\n    })\n    .catch((err) => console.log(`Ошибка.....: ${err}`));\n}\n\nexport function removeLikeApi(id, button, likes, removeLike) {\n  removeLike(id)\n    .then((res) => {\n      button.classList.remove(\"card__like-button_is-active\");\n      likes.textContent = res.likes.length;\n    })\n    .catch((err) => console.log(`Ошибка.....: ${err}`));\n}\n","// Функция добавления попапам класса открытия\nexport function openPopup(popupElement) {\n  popupElement.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", closePopupByEsc);\n}\n\n// Функция перебора элементов с последующим наложением на каждый функцию,\n//которая убирает класс с элементов\nexport function closePopup(popupElement) {\n  popupElement.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", closePopupByEsc);\n}\n\n// Слушатель на весь документ, если конпка Escape и у попапа класс открытия, то попап закрывается\nfunction closePopupByEsc(evt) {\n  if (evt.key === \"Escape\") {\n    closePopup(document.querySelector(\".popup_is-opened\"));\n  }\n}\n\n// Функция, которая убирает класс с элементов, если нажатие вне попапа на оверлей\nexport function addCloseOverlayListener(element) {\n  element.addEventListener(\"click\", function (e) {\n    if (e.target === e.currentTarget) {\n      closePopup(e.currentTarget);\n    }\n  });\n}\n","const showInputError = (\n  formElement,\n  inputElement,\n  errorMessage,\n  { inputErrorClass, errorClass }\n) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.add(inputErrorClass);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(errorClass);\n};\n\nconst hideInputError = (\n  formElement,\n  inputElement,\n  { inputErrorClass, errorClass }\n) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.remove(inputErrorClass);\n  inputElement.setCustomValidity(\"\");\n  errorElement.classList.remove(errorClass);\n  errorElement.textContent = \"\";\n};\n\nconst checkInputValidity = (\n  formElement,\n  inputElement,\n  { inputErrorClass, errorClass }\n) => {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n  if (!inputElement.validity.valid) {\n    showInputError(formElement, inputElement, inputElement.validationMessage, {\n      inputErrorClass,\n      errorClass,\n    });\n  } else {\n    hideInputError(formElement, inputElement, { inputErrorClass, errorClass });\n  }\n};\n\nconst setEventListeners = (\n  formElement,\n  {\n    inputSelector,\n    submitButtonSelector,\n    inactiveButtonClass,\n    inputErrorClass,\n    errorClass,\n  }\n) => {\n  const inputList = Array.from(formElement.querySelectorAll(inputSelector));\n  const buttonElement = formElement.querySelector(submitButtonSelector);\n  toggleButtonState(inputList, buttonElement, { inactiveButtonClass });\n\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", function () {\n      checkInputValidity(formElement, inputElement, {\n        inputErrorClass,\n        errorClass,\n      });\n      toggleButtonState(inputList, buttonElement, { inactiveButtonClass });\n    });\n  });\n};\n\nexport const enableValidation = ({\n  formSelector,\n  inputSelector,\n  submitButtonSelector,\n  inactiveButtonClass,\n  inputErrorClass,\n  errorClass,\n}) => {\n  const form = Array.from(document.querySelectorAll(formSelector));\n  form.forEach((formElement) => {\n    formElement.addEventListener(\"submit\", function (evt) {\n      evt.preventDefault();\n    });\n\n    setEventListeners(formElement, {\n      formSelector,\n      inputSelector,\n      submitButtonSelector,\n      inactiveButtonClass,\n      inputErrorClass,\n      errorClass,\n    });\n  });\n};\n\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((input) => {\n    return !input.validity.valid;\n  });\n};\n\nconst toggleButtonState = (\n  inputList,\n  buttonElement,\n  { inactiveButtonClass }\n) => {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.classList.add(inactiveButtonClass);\n    buttonElement.disabled = true;\n  } else {\n    buttonElement.classList.remove(inactiveButtonClass);\n    buttonElement.disabled = false;\n  }\n};\n\nexport const clearValidation = (\n  formElement,\n  inputElement,\n  {\n    // submitButtonSelector,inactiveButtonClass,\n    inputErrorClass,\n    errorClass,\n  }\n) => {\n  hideInputError(formElement, inputElement, inputErrorClass, errorClass);\n  // toggleButtonState(formElement, submitButtonSelector, inactiveButtonClass)\n};\n","//Главные ссылка и пароль, главный конфиг\nconst config = {\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-18\",\n  headers: {\n    authorization: \"4c84455c-b37c-4017-b90f-e1abc3cb4dd2\",\n    \"Content-Type\": \"application/json\",\n  },\n};\n\n//Если с ответом от сервера все ОК, то возращается результат, если нет - то отображается ошибка\nconst handleResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка: ${res.status}`);\n};\n\n//Функция-константа с получением данных о пользователе\nexport const getDataProfile = () => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: config.headers,\n  }).then(handleResponse);\n};\n\n//Функция-константа с получением данных о картах\nexport const getDataCards = () => {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: config.headers,\n  }).then(handleResponse);\n};\n\n//Функция-константа с пересохранением данных ИМЕНИ и ПОДРОБНЕЕ\nexport const saveProfileApi = (data) => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify(data),\n  }).then(handleResponse);\n};\n\n//Функция-константа с передачей на сервер данных карточки\nexport const addNewApiCard = (data) => {\n  return fetch(`${config.baseUrl}/cards`, {\n    method: \"POST\",\n    headers: config.headers,\n    body: JSON.stringify(data),\n  }).then(handleResponse);\n};\n\n//Функция-константа с удалением карточки с сервера\nexport const deleteCardApi = (cardID) => {\n  return fetch(`${config.baseUrl}/cards/${cardID}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then(handleResponse);\n};\n\n//Функция-константа с добавлением в массив LIKES лайка от меня\nexport const addLike = (cardID) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardID}`, {\n    method: \"PUT\",\n    headers: config.headers,\n  }).then(handleResponse);\n};\n\n//Функция-константа с удалением из массива LIKES лайка от меня\nexport const removeLike = (cardID) => {\n  return fetch(`${config.baseUrl}/cards/likes/${cardID}`, {\n    method: \"DELETE\",\n    headers: config.headers,\n  }).then(handleResponse);\n};\n\n//Функция-константа с пересохранением ссылки АВАТАРА\nexport const saveAvatarApi = (data) => {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    method: \"PATCH\",\n    headers: config.headers,\n    body: JSON.stringify(data),\n  }).then(handleResponse);\n};\n","import \"../pages/index.css\";\nimport { addCard, addLikeApi, removeLikeApi } from \"./card.js\";\nimport { openPopup, closePopup, addCloseOverlayListener } from \"./modal.js\";\nimport { enableValidation, clearValidation } from \"./validation.js\";\nimport {\n  getDataProfile,\n  getDataCards,\n  saveProfileApi,\n  addNewApiCard,\n  saveAvatarApi,\n  addLike,\n  removeLike,\n  deleteCardApi,\n} from \"./api.js\";\n\n// @todo: DOM узлы\nconst cardsList = document.querySelector(\".places__list\");\nconst profileEditOpen = document.querySelector(\".profile__edit-button\");\nconst profileAddButton = document.querySelector(\".profile__add-button\");\nconst popupTypeEdit = document.querySelector(\".popup_type_edit\");\nconst popupTypeNewCard = document.querySelector(\".popup_type_new-card\");\nconst popupTypeEditAvatar = document.querySelector(\".popup_type_edit-avatar\");\nconst closeButtons = document.querySelectorAll(\".popup__close\");\nconst popups = document.querySelectorAll(\".popup\");\nconst editProfile = document.forms[\"edit-profile\"];\nconst nameInput = editProfile.elements.name;\nconst jobInput = editProfile.elements.description;\nconst profileTitle = document.querySelector(\".profile__title\");\nconst profileDescription = document.querySelector(\".profile__description\");\nconst newPlace = document.forms[\"new-place\"];\nconst placeName = newPlace.elements[\"place-name\"];\nconst placeLink = newPlace.elements.link;\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\nconst profileAvatar = document.querySelector(\".profile__image\");\nconst buttonEditProfile = document.querySelector(\".button_edit-profile\");\nconst buttonNewPlace = document.querySelector(\".button_new-place\");\nconst buttonEditAvatar = document.querySelector(\".button_edit-avatar\");\nconst editAvatar = document.forms[\"edit-avatar\"];\nconst avatarInput = editAvatar.elements.avatar;\nlet myID = null;\nconst validationConfig = {formSelector: \".popup__form\", \n  inputSelector: \".popup__input\", \n  submitButtonSelector: \".popup__button\", \n  inactiveButtonClass: \"popup__button_disabled\", \n  inputErrorClass: \"popup__input_type_error\", \n  errorClass: \"popup__error_visible\", \n}; \n\n// @todo: Вывести карточки на страницу\n//Активация функции добавления карты, через проход массива карт из ссылки\nPromise.all([getDataProfile(), getDataCards()])\n  .then((res) => {\n    const dataProfile = res[0];\n    profileTitle.textContent = dataProfile.name;\n    profileDescription.textContent = dataProfile.about;\n    profileAvatar.style.backgroundImage = \"url(\" + dataProfile.avatar + \")\";\n    nameInput.value = profileTitle.textContent;\n    jobInput.value = profileDescription.textContent;\n    avatarInput.value = dataProfile.avatar;\n    myID = dataProfile._id;\n\n    res[1].forEach(function (element) {\n      cardsList.append(\n        addCard(\n          element,\n          myID,\n          addLikeApi,\n          removeLikeApi,\n          addLike,\n          removeLike,\n          showPopup,\n          deleteCardApi\n        )\n      );\n    });\n  })\n  .catch((err) => {\n    console.log(err);\n  });\n\n//Наложение на каждый попап класса анимации\npopups.forEach(function (element) {\n  element.classList.add(\"popup_is-animated\");\n});\n\n// При нажатии на кнопку редактирования профиля вызывается функция открытия попапа,\n//и в форме отображаются изначальные данные\nprofileEditOpen.addEventListener(\"click\", function () {\n  nameInput.value = profileTitle.textContent;\n  jobInput.value = profileDescription.textContent;\n  openPopup(popupTypeEdit);\n  clearValidation(editProfile,nameInput, validationConfig);\n  clearValidation(editProfile,jobInput, validationConfig);\n});\n\n// При нажатии на кнопку добавления карточки вызывается функция открытия попапа\nprofileAddButton.addEventListener(\"click\", function () {\n  openPopup(popupTypeNewCard);\n});\n\n// При нажатии на аватарку вызывается функция открытия попапа\nprofileAvatar.addEventListener(\"click\", function () {\n  openPopup(popupTypeEditAvatar);\n});\n\n// Функция с константой попапа карточек с изображениями и привязка к ним данных из\n//темплейта и вызов функции открытии попапа\nfunction showPopup(item) {\n  popupTypeImage.querySelector(\".popup__image\").src = item.link;\n  popupTypeImage.querySelector(\".popup__image\").alt = item.name;\n  popupTypeImage.querySelector(\".popup__caption\").textContent = item.name;\n  openPopup(popupTypeImage);\n}\n\n// Перебор кнопок закрытия с последующим наложения на них функции, которая убирает класс с элементов\ncloseButtons.forEach(function (element) {\n  element.addEventListener(\"click\", function () {\n    popups.forEach(closePopup);\n  });\n});\n\n// Перебор попапов с последующим наложения на них функции, которая убирает класс с элементов,\n//если нажатие вне попапа на оверлей\npopups.forEach(addCloseOverlayListener);\n\n//Функция сохранения данных ИМЕНИ и ПОДРОБНЕЕ\nfunction saveProfileData(evt) {\n  evt.preventDefault();\n  renderLoading(true, buttonEditProfile);\n  saveProfileApi({\n    name: nameInput.value,\n    about: jobInput.value,\n  })\n    .then((res) => {\n      profileTitle.textContent = res.name;\n      profileDescription.textContent = res.about;\n      closePopup(popupTypeEdit);\n    })\n    .catch((err) => console.log(`Ошибка.....: ${err}`))\n    .finally(() => {\n      renderLoading(false, buttonEditProfile);\n    });\n}\n\neditProfile.addEventListener(\"submit\", saveProfileData);\n\n//Функция сохранения данных КАРТОЧКИ\nfunction createCard(evt) {\n  evt.preventDefault();\n  renderLoading(true, buttonNewPlace);\n  addNewApiCard({\n    name: placeName.value,\n    link: placeLink.value,\n  })\n    .then((res) => {\n      cardsList.prepend(\n        addCard(\n          res,\n          myID,\n          addLikeApi,\n          removeLikeApi,\n          addLike,\n          removeLike,\n          showPopup,\n          deleteCardApi\n        )\n      );\n      closePopup(popupTypeNewCard);\n    })\n    .catch((err) => console.log(`Ошибка.....: ${err}`))\n    .finally(() => {\n      renderLoading(false, buttonNewPlace);\n      evt.target.reset();\n      clearValidation(newPlace, placeName,validationConfig);\n      clearValidation(newPlace, placeLink,validationConfig);\n    });\n}\n\nnewPlace.addEventListener(\"submit\", createCard);\n\n//Функция сохранения ссылки АВАТАРА\nfunction editAvatarApi(evt) {\n  evt.preventDefault();\n  renderLoading(true, buttonEditAvatar);\n  saveAvatarApi({\n    avatar: avatarInput.value,\n  })\n    .then((res) => {\n      profileAvatar.style.backgroundImage = \"url(\" + res.avatar + \")\";\n      closePopup(popupTypeEditAvatar);\n    })\n    .catch((err) => console.log(`Ошибка.....: ${err}`))\n    .finally(() => {\n      renderLoading(false, buttonEditAvatar);\n    });\n}\n\neditAvatar.addEventListener(\"submit\", editAvatarApi);\n\n//Функция, в которой если isLoading = true, то на кнопке текст \"Сохранение...\"\nfunction renderLoading(isLoading, element) {\n  if (isLoading) {\n    element.textContent = \"Сохранение...\";\n  } else {\n    element.textContent = \"Сохранить\";\n  }\n}\n\nenableValidation(validationConfig);\n"],"names":["cardTemplate","document","querySelector","content","addCard","item","myID","addLikeApi","removeLikeApi","addLike","removeLike","showPopup","deleteCardApi","cardElement","cloneNode","src","link","alt","name","textContent","numberOfLikes","likes","length","deleteButton","owner","_id","remove","addEventListener","id","card","then","catch","err","console","log","concat","deleteCard","cardLikeButton","some","like","classList","add","contains","button","res","openPopup","popupElement","closePopupByEsc","closePopup","removeEventListener","evt","key","_ref5","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","hideInputError","formElement","inputElement","_ref2","errorElement","setCustomValidity","toggleButtonState","inputList","buttonElement","_ref6","input","validity","valid","hasInvalidInput","disabled","clearValidation","_ref7","config","baseUrl","headers","authorization","handleResponse","ok","json","Promise","reject","status","cardID","fetch","method","cardsList","profileEditOpen","profileAddButton","popupTypeEdit","popupTypeNewCard","popupTypeEditAvatar","closeButtons","querySelectorAll","popups","editProfile","forms","nameInput","elements","jobInput","description","profileTitle","profileDescription","newPlace","placeName","placeLink","popupTypeImage","profileAvatar","buttonEditProfile","buttonNewPlace","buttonEditAvatar","editAvatar","avatarInput","avatar","validationConfig","renderLoading","isLoading","element","all","dataProfile","about","style","backgroundImage","value","forEach","append","e","target","currentTarget","data","preventDefault","body","JSON","stringify","finally","prepend","reset","Array","from","_ref4","_ref3","patternMismatch","dataset","errorMessage","_ref","showInputError","validationMessage","checkInputValidity","setEventListeners"],"sourceRoot":""}